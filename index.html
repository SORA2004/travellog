<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Travellog</title>
  
  <meta name="description" content="Travellog와 함께 당신의 여행을 기록하고 공유하세요. 멋진 여행 이야기를 전 세계와 나누고, 새로운 여행지를 발견해보세요!">
  <meta name="keywords" content="여행, 여행 로그, 여행 기록, 여행 공유, Travellog">
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Travellog",
    "url": "https://www.travellog.com",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.travellog.com/search-results.html?query={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  
  <!-- 헤더 삽입 위치 -->
  <header></header>

  <!-- 본문 내용 -->
  <section class="main-banner">
    <img src="mainbanner.jpg" alt="Travellog Banner" class="banner-image" loading="lazy">
   
    <div class="banner-overlay">
      <div class="banner-content">
        <h1 class="banner-title">
          나의 멋진 여행이 80억명과 함께하는 그 순간
        </h1>
        <p class="banner-subtitle">
          Travellog와 함께 여행을 기록하고 공유하세요.
        </p>
        <div class="search-bar">
          <form class="search-form" onsubmit="handleSearch(); return false;">
            <input type="text" id="searchInput" placeholder="여행지를 검색해보세요!" class="search-input">
            <button type="submit" id="searchButton" class="search-button">
              검색
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>
  
  <section class="call-to-action bg-gray-100 py-12">
    <div class="cta-content max-w-3xl mx-auto text-center px-4">
      <h2 class="text-3xl font-bold mb-4">당신의 여행 이야기를 공유하세요!</h2>
      <p class="combined-text">
        Travellog와 함께 당신의 멋진 여행을 기록하고 전 세계와 공유해보세요.<br>
        지금 바로 첫 여행 로그를 작성해보세요!
      </p>
      <a href="addblog.html" class="inline-flex items-center bg-white hover:bg-blue-50 text-blue-500 border border-white font-semibold py-3 px-6 rounded-full shadow transition-colors">
        <i class="fas fa-pencil-alt mr-2"></i> 여행 로그 작성하기
      </a>
    </div>
  </section>
  
  <section id="recentPostsSection" class="recent-posts py-12 bg-white hidden">
    <h2 class="text-3xl font-bold text-center mb-8">최근 읽은 로그</h2>
    <div id="postCardContainer" class="post-card-container max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
     
    </div>
  </section>

   
  <section class="popular-destinations py-12 bg-white">
    <h2 class="text-3xl font-bold text-center mb-8">여행지 찾기</h2>
    <div class="map-container max-w-5xl mx-auto">
      <iframe src="https://www.google.com/maps/embed?pb=..." width="100%" height="1000" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
    </div>
  </section>
  
  <footer class="footer py-8">
    <div class="footer-container max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-start">
      <div class="footer-logo mb-6 md:mb-0">
        <h4 class="text-2xl font-bold mb-2">Travellog</h4>
        <p>나의 멋진 여행을 공유하고, 전 세계와 함께 여행하세요!</p>
      </div>
      <div class="footer-links mb-6 md:mb-0">
        <h5 class="text-xl font-semibold mb-4">메뉴</h5>
        <ul class="space-y-2">
          <li><a href="index.html" class="hover:underline">홈</a></li>
          <li><a href="terms.html" class="hover:underline">약관</a></li>
          <li><a href="privacy.html" class="hover:underline">개인정보 보호정책</a></li>
        </ul>
      </div>
      <div class="footer-social"></div>
    </div>

    <div class="footer-bottom mt-8 border-t border-gray-700 pt-4 text-center text-gray-400">
      <p>© 2024 Travellog. All rights reserved.</p>
    </div>
  </footer>

  <!-- 우측 하단 의견 보내기 버튼 -->
<button id="feedbackButton" class="fixed bottom-6 right-6 bg-white text-blue-500 px-4 py-2 rounded-full shadow-lg hover:bg-gray-200 z-50 flex items-center">
  <span class="text-xl mr-2">+</span>의견 보내기
</button>

<!-- 의견 보내기 모달 -->
<div id="feedbackModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50">
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg w-80">
    <h2 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-300">의견 보내기</h2>
    <textarea id="feedbackInput" rows="4" class="w-full border border-gray-300 rounded p-2 mb-4 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-300" placeholder="더 나은 여행을 위해 개선할 점을 알려주세요:)"></textarea>
    <div class="flex justify-end space-x-2">
      <button id="cancelButton" class="bg-gray-300 text-gray-700 px-3 py-1 rounded hover:bg-gray-400">취소</button>
      <button id="submitButton" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">전송</button>
    </div>
  </div>
</div>

  <!-- 스크립트들 -->
<script type="module">
  import { db, auth } from './scripts/firebase.js'; // firebase.js에서 db와 auth를 임포트
  import { addDoc, collection, serverTimestamp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';
  import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js';
	
  document.addEventListener('DOMContentLoaded', () => {
    // 모달 창 요소 참조
    const feedbackButton = document.getElementById('feedbackButton');
    const feedbackModal = document.getElementById('feedbackModal');
    const cancelButton = document.getElementById('cancelButton');
    const submitButton = document.getElementById('submitButton');
    const feedbackInput = document.getElementById('feedbackInput');

    // 의견 보내기 버튼 클릭 시 모달 표시
    feedbackButton.addEventListener('click', () => {
      feedbackModal.classList.remove('hidden');
    });

    // 취소 버튼 클릭 시 모달 숨기기
    cancelButton.addEventListener('click', () => {
      feedbackModal.classList.add('hidden');
      feedbackInput.value = ''; // 입력 필드 초기화
    });

    // 전송 버튼 클릭 시 피드백 저장
    submitButton.addEventListener('click', async () => {
      const feedbackText = feedbackInput.value.trim();

      if (feedbackText) {
        try {
          // 현재 사용자 정보 가져오기
          let userId = null;
          let userEmail = null;
          if (auth.currentUser) {
            userId = auth.currentUser.uid;
            userEmail = auth.currentUser.email;
          }

          // Firestore에 피드백 저장
          await addDoc(collection(db, 'feedback'), {
            userId: userId,
            userEmail: userEmail,
            feedback: feedbackText,
            createdAt: serverTimestamp()
          });

          alert('감사합니다! 의견이 제출되었습니다.');

        } catch (error) {
          console.error('피드백 전송 중 오류 발생:', error);
          alert('피드백 전송 중 오류가 발생했습니다. 다시 시도해 주세요.');
        } finally {
          feedbackModal.classList.add('hidden');
          feedbackInput.value = ''; // 입력 필드 초기화
        }
      } else {
        alert('의견을 입력해 주세요.');
      }
    });
  });
	
	</script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Travellog",
    "url": "https://www.travellog.com",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://www.travellog.com/search-results.html?query={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <script type="module" src="scripts/firebase.js"></script>
  <script type="module" src="scripts/header.js"></script>
  <script type="module" src="scripts/blogList.js"></script>
  <script type="module" src="scripts/search.js"></script>
 
  <script>
    // 검색 버튼 클릭 및 Enter 키로 검색 기능 실행
    function handleSearch() {
      const searchQuery = document.getElementById('searchInput').value.trim();
      if (searchQuery) {
        window.location.href = `search-results.html?query=${encodeURIComponent(searchQuery)}`;
      } else {
        alert("검색어를 입력해주세요.");
      }
    }

    document.getElementById('searchButton').addEventListener('click', handleSearch);

    document.getElementById('searchInput').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        handleSearch();
      }
    });
  </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Travellog",
      "url": "https://www.travellog.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.travellog.com/search-results.html?query={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <script type="module" src="scripts/firebase.js"></script>
    <script type="module" src="scripts/header.js"></script>
    <script type="module" src="scripts/blogList.js"></script>
    <script type="module" src="scripts/search.js"></script>
   
    <script>
      // 검색 버튼 클릭 및 Enter 키로 검색 기능 실행
      function handleSearch() {
        const searchQuery = document.getElementById('searchInput').value.trim();
        if (searchQuery) {
          window.location.href = `search-results.html?query=${encodeURIComponent(searchQuery)}`;
        } else {
          alert("검색어를 입력해주세요.");
        }
      }

      document.getElementById('searchButton').addEventListener('click', handleSearch);

      document.getElementById('searchInput').addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          handleSearch();
        }
      });
    </script>

</body>
</html>
